# Python code
import datetime
import yfinance as yf
import matplotlib.pyplot as plt
import pandas as pd

# Get the current date
current_date = datetime.date.today()
print("Today's date is:", current_date)

# Get the data for the stock META and TESLA by specifying the stock ticker, start date, and end date
meta_data = yf.download('META', start='2022-01-01', end=current_date)[['Close']].rename(columns={'Close': 'META'})
tesla_data = yf.download('TSLA', start='2022-01-01', end=current_date)[['Close']].rename(columns={'Close': 'TESLA'})

# Merge the data on date
data = pd.merge(meta_data, tesla_data, left_index=True, right_index=True)

# Save the data to a CSV file
data.to_csv('stock_price_ytd.csv')

# Plot the data
plt.figure(figsize=(14, 7))
plt.plot(data['META'], label='META')
plt.plot(data['TESLA'], label='TESLA')
plt.title('Stock Price Change YTD for META and TESLA')
plt.xlabel('Date')
plt.ylabel('Closing Price')
plt.legend()
plt.grid(True)

# Save the plot to a PNG file
plt.savefig('stock_price_ytd.png')